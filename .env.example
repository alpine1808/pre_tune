# ==== Gemini (Developer API – free tier) ====
GEMINI_API_KEY=""
GEMINI_API_KEY_CLASSIFIER=""
GEMINI_API_KEY_GROUP=""
GEMINI_API_KEY_HEADER=""

# ==== Vertex (tắt) ====
GOOGLE_GENAI_USE_VERTEXAI=0
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=

# ==== Database & app core ====
DATABASE_URL=""
PRE_TUNE_DRY_RUN=0
LOG_LEVEL=INFO
LOG_DATEFMT=%Y-%m-%d %H:%M:%S
LOG_HTTPX_QUIET=1

# ==== Model names ====
PRE_TUNE_MODEL_TEXT=gemini-2.5-flash            
PRE_TUNE_MODEL_TEXT_FALLBACK=gemini-2.0-flash        

# ==== Header filter LLM ====
PRE_TUNE_USE_HEADER_FILTER_LLM=1
PRE_TUNE_HEADER_MODEL_PRIMARY=gemini-2.5-flash   
PRE_TUNE_HEADER_MODEL_FALLBACK=gemini-2.0-flash      
PRE_TUNE_HEADER_RPM=2
PRE_TUNE_HEADER_MAX_RETRIES=5
PRE_TUNE_HEADER_MAX_RETRY_TIME_SEC=120

# ==== Text clean ====
PRE_TUNE_USE_TEXT_CLEAN=1
PRE_TUNE_RPM_TEXT=3                                  

# ==== Rate limit & Retry (free-tier friendly) ====
PRE_TUNE_MAX_RETRIES=5
PRE_TUNE_BASE_BACKOFF_SEC=2
PRE_TUNE_JITTER_SEC=8                                 
PRE_TUNE_MAX_RETRY_TIME_SEC=120
PRE_TUNE_ADAPT_SLOWDOWN=1.6
PRE_TUNE_MIN_RPM_FLOOR=1
PRE_TUNE_MAX_BATCH_SIZE=24

WINDOW_TAIL_CHARS=280
WINDOW_HEAD_CHARS=280
MAX_OUTPUT_TOKENS_TEXT=1024
MAX_PROMPT_TOKENS_TEXT=2048

# ==== Redis limiter / cache ====
REDIS_URL="redis://localhost:6379/0"
USE_REDIS_CACHE=true

# ==== Pipeline level ====
PRE_TUNE_OBJECT_LEVEL=scu

# ==== Embedding & grouping ====
EMBEDDING_MODEL_NAME=BAAI/bge-m3
GROUP_COSINE_T1=0.94                                   
GROUP_COSINE_T2_ASSIST=0.88                            
GROUP_SAME_ANCHOR_ONLY=true
USE_GEMINI_MERGE_ASSIST=true                         

# ==== List handling ====
FLATTEN_LISTS_TO_SENTENCE=true

# ==== Classifier (0/1) ====
CLASSIFIER_MODEL_ID=gemini-2.0-flash            
CLASSIFIER_MAX_CHARS=300   
CLASSIFIER_MAX_BATCH=5                            

# ==== Global limiter (áp cho tất cả call Gemini) ====
RPM_GLOBAL_GEMINI=3                                    
