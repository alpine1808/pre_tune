# ==== Gemini (Developer API – free tier) ====
# BẮT BUỘC: điền API key Developer (không cần Vertex)
GEMINI_API_KEY="AIzaSyBmpznN76bvWreJ-OhTIYNGaiBuYatSlOA"

# ==== Vertex (không dùng cho free cá nhân; để trống hoặc 0) ====
GOOGLE_GENAI_USE_VERTEXAI=0
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=

# ==== Database & app core ====
DATABASE_URL=postgresql+psycopg://kms:kmsrocks@localhost:5433/vectordb
PRE_TUNE_DRY_RUN=0
LOG_LEVEL=INFO

# ==== Model names ====
PRE_TUNE_MODEL_TEXT=gemini-2.0-flash
PRE_TUNE_MODEL_TEXT_FALLBACK=gemini-2.0-flash
PRE_TUNE_MODEL_VISION=gemini-2.0-flash
PRE_TUNE_MODEL_VISION_FALLBACK=gemini-2.0-flash

# ==== Vision gate (tắt để text-only) ====
USE_VISION_GATE=0
# Tương thích ngược (nếu chỗ khác còn đọc biến cũ):
PRE_TUNE_USE_VISION=0

# ==== Header filter LLM ====
PRE_TUNE_USE_HEADER_FILTER_LLM=1
PRE_TUNE_HEADER_MODEL_PRIMARY=gemini-2.0-flash
PRE_TUNE_HEADER_MODEL_FALLBACK=gemini-2.0-flash
PRE_TUNE_HEADER_RPM=4
PRE_TUNE_HEADER_MAX_RETRIES=5
PRE_TUNE_HEADER_MAX_RETRY_TIME_SEC=120

# ==== Text clean ====
PRE_TUNE_USE_TEXT_CLEAN=1

# ==== Rate limit & Retry (thân thiện free tier) ====
PRE_TUNE_RPM_TEXT=8
PRE_TUNE_RPM_VISION=4
PRE_TUNE_MAX_RETRIES=5
PRE_TUNE_BASE_BACKOFF_SEC=0.5
PRE_TUNE_JITTER_SEC=0.25
PRE_TUNE_MAX_RETRY_TIME_SEC=120
PRE_TUNE_ADAPT_SLOWDOWN=1.6
PRE_TUNE_MIN_RPM_FLOOR=1
PRE_TUNE_MAX_BATCH_SIZE=24

# ==== Logging ====
LOG_DATEFMT=%Y-%m-%d %H:%M:%S
LOG_HTTPX_QUIET=1

# ==== (Tùy chọn) Redis rate limiter phân tán ====
# Nếu để trống → tự động fallback sang limiter nội bộ
REDIS_URL="redis://localhost:6379/0"
